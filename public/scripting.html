<html lang="en-US"><head><meta charset="utf-8"><title>Green Vision Media | Docs</title><link href="../images/favicon.png" rel="shortcut icon" type="image/x-icon"><link href="../images/webclip.png" rel="apple-touch-icon"><link href="../css/gv.min.css" rel="stylesheet"><meta content="http://greenvision.media/" property="og:url"><meta content="website" property="og:type"><meta content="Documenting our low-carbon, low-code workflow" name="description"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="Green Vision Media" property="og:title"><meta content="images/Dithered-Wind-Turbines.png" property="og:image:url"><meta content="Documenting our low-carbon, low-code workflow" property="og:description"><meta content="summary_large_image" name="twitter:card"><meta content="http://greenvision.media/docs" property="twitter:domain"><meta content="http://greenvision.media/docs" property="twitter:url"><meta content="Green Vision Media" name="twitter:title"><meta content="Documenting our low-carbon, low-code workflow" name="twitter:description"><meta content="images/Dithered-Wind-Turbines.png" name="twitter:image"></head><body class="gv-documentation"><nav><a href="https://greenvision.media/docs/"><svg viewbox="0 0 128 128"><title>Click to scroll to the top</title><path d="M64.1,38.8c4.09-7.3,8.96-14.03,13.79-20.82,8.59,6.28,17.39,12.98,25.42,19.99-10.38,12.69-21.35,25.06-32.97,36.61,0,0-6.23,6.26-6.23,6.26-13.82-13.57-27.07-27.82-39.24-42.88,12.33-10.51,25.18-20.56,39.23-28.7-7.08,12.28-15.68,23.52-24.64,34.45v-9.81c10.76,8.88,21.01,18.35,30.88,28.21h-12.47c9.87-9.85,20.13-19.31,30.89-28.2,0,0,0,9.78,0,9.78-3.36-4.05-6.63-8.19-9.81-12.4,0,0-3.15-4.25-3.15-4.25h6.1c-5.78,4.17-11.56,8.21-17.79,11.76h0Z"></path><path d="M104.98,64.96c-8.2,17.86-21.01,33.23-34.64,47.11,0,0-6.22,6.25-6.22,6.25-15.98-15.66-31.5-32.75-40.89-53.35,17.87,8.17,33.25,20.98,47.11,34.64,0,0-12.47,0-12.47,0,13.88-13.63,29.25-26.43,47.11-34.64Z"></path></svg>GV Docs</a> <a href="https://greenvision.media/docs/class-naming.html">Class Naming</a> <a href="https://greenvision.media/docs/scripting.html">Scripting</a> <a href="https://greenvision.media/docs/vectors.html">Vectors</a></nav><main><h1 id="scripting-strategy">Scripting Strategy</h1><h2 id="mindset">Mindset</h2><p>Scripting with a CMS like Webflow is tricky, and it&#39;s even trickier to add scripts without bloating the page weight.</p><p>At GV we needed a way to easily and quickly add additional functionality to our projects, without needing too much extra processing power.</p><p>We&#39;re basing our strategy on OG web performance optimizer Steve Souder&#39;s <a href="https://stevesouders.com/examples/rules.php">14 Rules for Faster-Loading Web Sites</a>.</p><ul><li><em>Rule 6</em>: Put scripts at the bottom</li><li><em>Rule 8</em>: Make Javascript external</li><li><em>Rule 10</em>: Minify Javascript</li></ul><h2 id="script-strategy">Script strategy</h2><p>We&#39;ve created GitHub repositories for the scripts we commonly used, and created a pipeline to automatically add them to your site. To include one of these scripts, you only need to follow four steps:</p><ol><li>Add an HTML embed or inline element and give it a class like <code>.gv-[script-name]</code>.</li><li>Optionally, change data-attributes to change script options</li><li>Add a script tag to the document head with the following format <code>&lt;script src=&quot;./js/[script-name].min.js defer&quot;&gt;</code></li><li>Add the scripts you used in the project to the Pusherman options</li></ol><blockquote><p>If the script is only used on one page, only add the script tag to the custom code for that page. If it will be used globally, use the site-wide custom code.</p></blockquote><p>Read more about the <a href="Deployment.md">build process</a>.</p><h2 id="gv-scripts">GV Scripts</h2><h4 id="carbon"><code>carbon</code><a href="#carbon">#</a></h4><p>This will display the CO2 per page view and the percentile rating. Forked directly from Wholegrain digital&#39;s <a href="gitlab.com/wholegrain/(https://gitlab.com/wholegrain/website-carbon-badges/">carbon badge</a></p><h5 id="usage">Usage</h5><p>Add a span, usually somewhere in the footer, and give it the <code>gv-carbon</code> classname.</p><h4 id="hide-email"><code>hide-email</code><a href="#hide-email">#</a></h4><p>Obfuscate&#39;s the client&#39;s email to hide it from scrapers and bots.</p><h5 id="usage-1">Usage</h5><p>Add the clients email to an element&#39;s attributes. If the client&#39;s email is <a href="mailto:&#x69;&#x6e;&#x66;&#x6f;&#64;&#101;&#x78;&#x61;&#109;&#x70;&#108;&#x65;&#46;&#x63;&#111;&#109;">&#x69;&#x6e;&#x66;&#x6f;&#64;&#101;&#x78;&#x61;&#109;&#x70;&#108;&#x65;&#46;&#x63;&#111;&#109;</a>, then add <code>data-user = &quot;info&quot;</code>, <code>data-site = &quot;example.com&quot;</code>.</p><p>The script will store the first set of <code>user</code> and <code>site</code> values it finds in the document. It will use those for each new instance of <code>.gv-hide-email</code>, unless those values are overridden by a new set. This lets you use multiple emails on the same page.</p><blockquote><p>To have the final site display the text inside the span instead of the client&#39;s email, add the optional attribute to <code>data-keep-text</code></p></blockquote><h5 id="options">Options</h5><table><thead><tr><th>Attribute</th><th>Description</th><th>Required?</th><th>Example</th></tr></thead><tbody><tr><td>data-site</td><td>The email domain</td><td>Yes</td><td>greenvision.media</td></tr><tr><td>data-user</td><td>The email username</td><td>Yes</td><td>hello</td></tr><tr><td>data-keep-text</td><td>Lets you keep whatever text is inside the link (Boolean)</td><td>Yes</td><td>N/A</td></tr></tbody></table><h4 id="youtube"><code>youtube</code><a href="#youtube">#</a></h4><p>Adds a high-performance youtube embed to your page. Forked directly from <a href="https://github.com/paulirish/lite-youtube-embed">this github project</a></p><h5 id="usage-2">Usage</h5><p>Add a div with the class <code>gv-youtube</code> , then add the video&#39;s ID to the attributes.</p><h5 id="options-1">Options</h5><table><thead><tr><th>Attribute</th><th>Description</th><th>Required?</th><th>Example</th></tr></thead><tbody><tr><td>data-id</td><td>The youtube id (the code after watch?v= in the YT url)</td><td>Yes</td><td>y6120QOlsfU</td></tr><tr><td>data-thumbnail</td><td>Specify a path to the a thumbnail. Overrides YT&#39;s default</td><td>No</td><td>./images/jfk</td></tr><tr><td>data-params</td><td>Specify youtube player parameters (see <a href="https://developers.google.com/youtube/player_parameters#Parameters">this</a> docs page)</td><td>No</td><td>controls=0&amp;start=10&amp;end=30</td></tr></tbody></table><h4 id="basin"><code>basin</code><a href="#basin">#</a></h4><p>Adds an ajax-enabled form to your site. Uses usebasin.com, read <a href="https://usebasin.com/docs/">their docs</a> for an in-depth explanation.</p><h5 id="usage-3">Usage</h5><p>Paste your Basin form endpoint into the &quot;actions&quot; field in Webflow element settings, and give the form component the <code>gv-basin</code> class.</p><p>When submitted <em>successfully</em>, the form (that is, not the wrapper form component but the actual HTML form) will disappear. The div with the class <code>w-form-done</code> will appear. If the submit fails, the form will remain and the dib with the class <code>w-form-done</code> will appear.</p><blockquote><p>You don&#39;t need to add these classes in webflow; this works out of the box with webflow&#39;s failure and success divs.</p></blockquote><h2 id="script-writing-strategy">Script writing strategy</h2><h3 id="prettier">Prettier</h3><p>We use <a href="https://prettier.io/">Prettier</a> to keep our code formatting consistant, and to make sure we&#39;re faced with as few unimportant decisions as possible while coding. We know some people don&#39;t love opinionated code formatters, but we&#39;re very much of the mindset that there&#39;s no best way to format code, as long as everyone is doing it the same.</p><p>You&#39;ll need to install the prettier extension in VScode and make it your default formatter. There&#39;s a guide on this <a href="https://www.digitalocean.com/community/tutorials/how-to-format-code-with-prettier-in-visual-studio-code">here</a>.</p><h3 id="gulp">Gulp</h3><p>We use <a href="https://gulpjs.com/">Gulp</a> to automate build processes. Mostly, this is used to minify our code, but we also like the plugin <code>gulp-replace</code> for certain scripts, where it&#39;s necessary to inject CSS or HTML directly from the script.</p><h3 id="script-template">Script template</h3><p>We have created a <a href="github.com/greenvisionmedia/template">template</a> with a nice predefined directory structure. It has a <code>.gulpfile</code> that will work for most plugins, and a <code>prettierrc.yaml</code> that has our favorite Prettier options. You might need to run <code>&gt;npm install</code> to get gulp installed in the directory - then just run <code>&gt;gulp</code> to get site-ready files in the /public directory.</p></main><script>let links = document.querySelector('nav').children;let page = window.location.href;for(link of links) {if (page===link.href) {link.classList.add('gv-current');}}</script></body></html>